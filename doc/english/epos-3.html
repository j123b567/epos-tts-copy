<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>               The Epos Speech System: Options</TITLE>
 <LINK HREF="epos-4.html" REL=next>
 <LINK HREF="epos-2.html" REL=previous>
 <LINK HREF="epos.html#toc3" REL=contents>
</HEAD>
<BODY>
<A HREF="epos-4.html">Next</A>
<A HREF="epos-2.html">Previous</A>
<A HREF="epos.html#toc3">Contents</A>
<HR>
<H2><A NAME="s3">3. Options</A></H2>

<P>
<P>Most aspects of the operation can be customized by changing options.
This can be enforced by TTSCP commands, in configuration files and
on the command line.  Basically, an option is an option name/option value
pair. There are a few possible option types: number, string, yes/no,
character, and a few enumerated types.
<P>Almost all individual options are documented in 
<A HREF="#indivopts">this document</A>.  If you strongly suspect this section of
documentation to be out-of date, the reliable list of all built-in
long options can be found in <CODE>src/options.lst</CODE>.  (See approximately
line 320 and below. Every line represents at most one option for every
option class as explained below. The option name is quoted; its
semantics is usually explained following the option.)  You can also
list the option names and types using <CODE>epos -H</CODE>.
<P>
<H2><A NAME="ss3.1">3.1 Option classes</A>
</H2>

<P>
<P>Basically, there are three major classes of options: global options,
language options and voice options. For instance, switching a voice
means switching to another set of voice options, while the language
options and global options stay the same.
<P>Every voice is language specific (implies a specific language).
That's why switching the language automatically switches the voice
to the voice defined as default for this particular language.
(It is however possible to use the same configuration file to setup
a similarly sounding voice for every language if desired.)
It is also important to distinguish between a voice and an inventory.
An <EM>inventory</EM> is a set of speaker-dependent files used
to base a <EM>voice</EM>, that is, a mode of speech, on.  Multiple
different voices may use the same inventory, and may even sound
quite different depending on various configuration options.
The average user may expect to be able to modify the voice dependent
configuration files, but not inventory files.  Also, the inventories
may often be distributed externally to Epos, while sample voices
based on them may either be included with Epos, or with the
segment inventory, or their creation may be left to the user.
<P>A set of voice options should completely describe a voice.
A set of language options should completely describe a language,
except for voice-specific behavior. A set of global options
should cover language independent aspects of operation.
It should be understood that a set of options may employ various
references to other information, especially filenames (of language
dependent transcription rules, voice dependent segment inventories
etc.)
<P>Some language and/or voice specific options may have suitable defaults
for all but specific languages/voices. That's why there is a corresponding language
option for every voice option to default to if unspecified for a given
voice. Likewise, there is a global option for every language option
to default to. Therefore, adding a new language or voice options
doesn't necessarily imply adding them to each language or voice
configuration file, if a reasonable default can be suggested.
<P>Whenever an option name is given, it is first understood as a voice option
(of the current voice); if there is no such voice option, the name
is treated as a language option, then as a global option. To override
this order, you can prefix an option with "C:", "L:" or "V:". This will
restrict the search to global, language or voice options, respectively.
(This is automatically done with configuration files, because every
configuration file describes either a language or a voice, or it is unrelated
to the current language and voice altogether.)
<P>
<H2><A NAME="cfg-files"></A> <A NAME="ss3.2">3.2 Configuration files </A>
</H2>

<P>
<P>Whenever the program starts up, it reads a number of configuration
files, setting up the initial (default) values of the options.
These are located under <CODE>/usr/lib/epos</CODE> (unless overidden
at configure/compile time or
with the <CODE>--base_dir</CODE> option on the command line). By convention,
configuration file names have the ".ini" suffix.
<P>(On a Windows NT-like operating system, you can use the
<CODE>HKEY_LOCAL_MACHINE\SOFTWARE\Epos\Setup</CODE>
registry key to set the value of <CODE>Path</CODE> to a path leading
to the configuration files.  This value can still be overridden
by the command line.)
<P>Unless overridden, three files in <CODE>/usr/lib/epos/cfg</CODE> will be processed
to setup the global configuration: <CODE>fixed.ini</CODE>, <CODE>epos.ini</CODE> and
either <CODE>ansi.ini</CODE> or <CODE>rtf.ini</CODE> (depending on the preferred
output format if colored output is turned on -- either ANSI escape sequences
or RTF are supported at the moment; other markup formats can be added easily).
By convention, <CODE>fixed.ini</CODE> contains the standard global configuration
values used by a given installation and rarely or never changes, while
<CODE>epos.ini</CODE> contains less permanent parameters and temporary values.
The global parameters include a list of <EM>languages</EM>, or language
configurations which will be parsed when the global configuration is set up.
Every language <CODE>.ini</CODE> file in turn contains a list of <EM>voices</EM> to be
configured for this particular language. Language configuration files
are located under <CODE>/usr/lib/epos/lng/*/*.ini</CODE>, voice configuration files
under <CODE>/usr/lib/epos/inv/*/*.ini</CODE>, where <CODE>*</CODE> represents any string
listed in the list of languages (or voices for a language). Go see the real
files under <CODE>/usr/lib/epos/cfg/*.ini</CODE> for an example.
<P>
<H3>Configuration file format overview</H3>

<P>
<P>A configuration file contains one option per line (empty lines are ignored).
Each option is a name-value pair, separated with whitespace.  A string value
may be (and sometimes must be, e.g. if it begins with whitespace) enclosed
in double quotes.  Every configuration
file is associated with a certain option set, that is, it contains either just
global options, or options related to some language or voice. (In the latter
two cases, the <CODE>name</CODE> option identifies the language or voice properly.)
<P>
<H3><A NAME="escaping"></A> Escaping special characters </H3>

<P>
<P>It is possible to enter some special characters using escape sequences, such
as <CODE>"\ "</CODE> for a space, <CODE>"\n"</CODE> for a newline, or <CODE>"\~"</CODE>
for <CODE>"..."</CODE> or <CODE>"dots"</CODE> (treated as a single character in Epos).
The available escape sequences are listed in 
<A HREF="#escapes">the table of escape sequences</A>.
<P>
<CENTER><TABLE BORDER><TR><TD>
<BR>
<A NAME="escapes"></A> escape sequence </TD><TD> interpreted as </TD><TD> ASCII code </TD><TD> example</TD></TR><TR><TD>
\n </TD><TD> newline </TD><TD> 10 </TD><TD></TD></TR><TR><TD>
\t </TD><TD> tab </TD><TD> 9 </TD><TD></TD></TR><TR><TD>
\e </TD><TD> escape </TD><TD> 27 </TD><TD></TD></TR><TR><TD>
\E </TD><TD> escape </TD><TD> 27 </TD><TD></TD></TR><TR><TD>
\[ </TD><TD> escape </TD><TD> 27 </TD><TD></TD></TR><TR><TD>
\\ </TD><TD> backslash </TD><TD> 92 </TD><TD></TD></TR><TR><TD>
\ </TD><TD> hard space </TD><TD> 255 </TD><TD></TD></TR><TR><TD>
\# </TD><TD> hash </TD><TD> 35 </TD><TD></TD></TR><TR><TD>
\; </TD><TD> semicolon </TD><TD> 59 </TD><TD></TD></TR><TR><TD>
\&commat; </TD><TD> at sign </TD><TD> 34 </TD><TD></TD></TR><TR><TD>
\~ </TD><TD> dots </TD><TD> (1) </TD><TD> No...</TD></TR><TR><TD>
\. </TD><TD> decimal point </TD><TD> (2) </TD><TD> 1.2 kg</TD></TR><TR><TD>
\- </TD><TD> range </TD><TD> (3) </TD><TD> 2-3 people</TD></TR><TR><TD>
\m </TD><TD> minus </TD><TD> (4) </TD><TD> -1</TD></TR><TR><TD>
\X </TD><TD> temporary </TD><TD> (31) </TD><TD></TD></TR><TR><TD>

<CAPTION>Escape sequences used in configuration files</CAPTION>
</TD></TR></TABLE></CENTER>
<P>(If you suspect this table to be out-of-date, you can consult the <CODE>token_esc</CODE>
and <CODE>value_esc</CODE> constants in <CODE>option.cc</CODE>, or the table in 
<CODE>parser.h</CODE>.) ASCII codes in parentheses are ASCII codes used for different
purposes by Epos.
<P>
<P>
<H3><A NAME="include-directive"></A> Comments and the @include directive </H3>

<P>
<P>A configuration file usually contains various comments. A comment can start
on any line with a semicolon or hash mark and lasts to the end of line.
The semicolon (or hash mark) must be located at the beginning of line
or just after some whitespace. Semicolons in the middle of a word don't
start a comment.
<P>If a line begins with <CODE>@include</CODE> (possibly preceded by whitespace),
it is treated as the <EM>include directive</EM>.
The format of the line should be <CODE>@include "filename"</CODE> and it will
cause the contents of the <CODE>filename</CODE> file to be inserted at this place of the 
main <CODE>.ini</CODE> file. These includes can be nested to any finite depth; if no or
relative path is specified, the directory which holds the topmost file is used for
the lookup.
<P>Two more directives, <CODE>@warn</CODE> and <CODE>@error</CODE> with obvious semantics
are available for diagnostic purposes.
<P>
<H2><A NAME="ss3.3">3.3 Command line</A>
</H2>

<P>
<P>Command line option values can be passed to Epos
at server startup, or to the <CODE>say</CODE> utility.
The behavior of these two command lines is very similar, though not identical.
The monolithic Epos executable should not deviate from the server executable,
unless specified otherwise.
<P>The options can be specified anywhere on the command line, and are processed
from left to right before any other text (which is treated as the text to be
synthesized) on the command line.  Long options, which correspond directly
to the options specified in configuration files, are preceded with a double dash
and they take a value, which can be separated
using the equality sign (<CODE>=</CODE>), or spacing; the value (<CODE>true</CODE> or the empty string)
can be understood implicitly, if applicable to the option type, and the option
is followed by another option or comes last at the command line. 
Short options are denoted by single letters, preceded with a single dash, and
they never take a value.
<P>
<H3>Input text</H3>

<P>
<P>Technically speaking, this section doesn't cover options, but it is nevertheless
included.
<P>The main purpose of the <CODE>say</CODE> utility is to convert a specified
text to speech.  Therefore, any command line text which is not part of an option
name or option value is concatenated together with spaces, and
sent to the server for the usual processing (TTS and phonetic
transcription), after all preceding, intervening or following
options have been sent to the server.
<P>The same is true for the monolithic Epos executable, but in this
case, only a single argument of this sort is accepted.  (Just
enclose the text with quotes to have it treated as a single
argument.  The sole reason why this is so is the less-than-maintained
status of the monolithic executable.)
<P>In both cases, quite random defaults are supplied if no input text
is specified.
<P>It is not possible nor desirable to specify the input text for
the TTSCP server executable.  It is accepted and silently ignored.
<P>
<P>
<H3>Long options</H3>

<P>
<P>The long options are also available through the <CODE>say</CODE> utility;
in such case, the long option is passed to the TTSCP server
without any effect on the <CODE>say</CODE> client.
<P>The ordering of the options on the command line is usually not significant,
unless the current language or voice is switched during the processing.
An example:
<P>
<BLOCKQUOTE><CODE>
<PRE>
say --language german --pausing "Wie geht es?" --show_segments
</PRE>
</CODE></BLOCKQUOTE>
<P>This sets the default language to German, enables pausing after each
transformation rule is applied to the text (sets the <CODE>pausing</CODE> option
to <CODE>true</CODE>, in other words) and prints the segment string generated
in the process (sets the <CODE>show_segments</CODE> option to <CODE>true</CODE>). The string
to be transcribed and synthesized is given on the command line as well
(it must be quoted unless it consists of a single word).
<P>The list of all available long options together with their types
can be obtained with <CODE>epos -H</CODE> of the main program (not the client
stub, sorry).  The semantics of nearly all individual long options is described
<A HREF="#indivopts">below</A>.
<P>For turning long boolean options off, it is possible to give their name
with three dashes. Therefore,
<P>
<BLOCKQUOTE><CODE>
<PRE>
say ---show_transcript "Say this, do not show the transcription"
</PRE>
</CODE></BLOCKQUOTE>
<P>is equivalent to
<P>
<BLOCKQUOTE><CODE>
<PRE>
say --show_transcript off "Say this, do not show the transcription"
</PRE>
</CODE></BLOCKQUOTE>
<P>Refer to the 
<A HREF="#indivopts">individual options</A> subsection
for documentation on available long options.
<P>
<H3>Language and voice switching</H3>

<P>
<P>Two pseudo-options <CODE>--language</CODE> and <CODE>--voice</CODE> can be used to switch
the current language or voice, or to specify options for other than the
default language or voice.  There may be multiple options of this kind
given to the <CODE>say</CODE> utility or the monolithic Epos executable, and
their ordering is important.  For example,
<P>
<BLOCKQUOTE><CODE>
<PRE>
say Something. --init_f 80 --voice vichova
</PRE>
</CODE></BLOCKQUOTE>
<P>doesn't do the expected thing, i.e. use the voice named "vichova"
as modified by setting the neutral pitch for this command to 80.
Instead, the neutral pitch is set for the default voice, and 
then the voice is switched to the specified one.  To get the
intended behavior, reorder the command line:
<P>
<BLOCKQUOTE><CODE>
<PRE>
say Something. --voice vichova --init_f 80
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H3>Short options</H3>

<P>
<P>The most frequently used options and occasionally even collections
of options and/or other stuff are given a shortcut, called a <EM>short option</EM>.
A short option is a single letter preceded by a single dash.
Usual conventions for merging short options into a single string
are available, and the example above may thus be abbreviated as
<P>
<BLOCKQUOTE><CODE>
<PRE>
say --language german -p "Wie geht es?" -d
</PRE>
</CODE></BLOCKQUOTE>
<P>or even 
<P>
<BLOCKQUOTE><CODE>
<PRE>
say --language german -pd "Wie geht es?"
</PRE>
</CODE></BLOCKQUOTE>
<P>(There is no short option for <CODE>--language</CODE>.)
<P>The short options are interpreted directly by the <CODE>say</CODE> utility;
that's why the list of short options available with this utility
is different from the list of short options available with the server
or the monolithic Epos executable.
A list of (the most of) the server short options can be obtained with
<CODE>epos --help</CODE>, or <CODE>epos -h</CODE>/.  A list of (the most of)
short options understood by the <CODE>say</CODE> utility can be obtained with
<CODE>say -h</CODE>.  Such list however includes undocumented options
which may disappear in the next releases.
<P>Please keep in mind that the say utility is only an example of a TTSCP
client and not a full-fledged controlling interface to Epos.
<P>
<H3>Server short options</H3>

<P>
<P>
<DL>
<DT><B>-f</B><DD><P>Do not fork at startup.  Same as <CODE>---forking</CODE>.
<DT><B>-h</B><DD><P>Show a summary of available short options
<DT><B>-p</B><DD><P>Same as <CODE>--pausing</CODE>.
<DT><B>-v</B><DD><P>Show Epos version.
<DT><B>-D</B><DD><P>Turn on debugging output.  Multiple <CODE>-D</CODE> options cause the output to be more
verbose.  
<DT><B>-H</B><DD><P>In addition to a summary of short options, show also a list of all available
long options.
</DL>
<P>
<H3>Client short options</H3>

<P>
<P>
<DL>
<DT><B>-k</B><DD><P>Shut down the server.
<DT><B>-l</B><DD><P>List all available languages and available voices for the current language.
<DT><B>-m</B><DD><P>Write the waveform to a file (said.vox in the client's current directory)
instead of writing it to the local sound card; the output doesn't
include any header and is in the mu law format.
<DT><B>-o</B><DD><P>Write the waveform to the standard output.  In this case, no transcription
is performed.
<DT><B>-u</B><DD><P>Turn on utterance chunking.  This option has unintuitive consequences
when combined with <CODE>-w</CODE>.
<DT><B>-w</B><DD><P>Write the waveform to a file (said.wav in the client's directory) instead
of writing it to the local sound card.
</DL>
<P>
<P>
<H2><A NAME="ss3.4">3.4 Setting options in TTSCP</A>
</H2>

<P>
<P>See the 
<A HREF="epos-4.html#ttscp">TTSCP specification</A> for general
overview of TTSCP and the <CODE>set</CODE> command.
<P>
<H3><A NAME="restricted-options"></A> <CODE>restr.ini</CODE> file </H3>

<P>
<P>Setting options in TTSCP can be a security problem, as some options
can cause the server to access unrelated files. It is therefore
strongly recommended not to run the Epos daemon with superuser privileges,
but sometimes a more fine-grained access control mechanism is needed.
It is authentication and limiting access to specified options
for some or all users.
<P>By default, all settable parameters can be changed by any outside connection
(this doesn't affect any other connections in any way). 
You can control this privilege by restricting it in <CODE>cfg/restr.ini</CODE>.
<P>Every line of that file is in the form
<P>
<BLOCKQUOTE><CODE>
<PRE>
option_name       access_rights
</PRE>
</CODE></BLOCKQUOTE>
<P>The <EM>access rights</EM> must be in lowercase and must not contain spaces. They are
a sequence of <CODE>r</CODE>, <CODE>w</CODE>', <CODE>$</CODE> and <CODE>#</CODE>, none of which may be repeated.
Their order is significant, the interpretation is as follows:
<P>
<UL>
<LI> if no <CODE>r</CODE> is mentioned, nobody can read the option value</LI>
<LI> if no <CODE>w</CODE> is mentioned, nobody can change the option value</LI>
<LI>  if a <CODE>r</CODE> or <CODE>w</CODE> appears without <CODE>$</CODE> or <CODE>#</CODE> to the left of them,
they grant the read and write rights, respectively, to even
anonymous connections.</LI>
<LI> following $, they grant the respective rights to any authenticated user.</LI>
<LI> following #, they grant the respective rights to the root only.</LI>
</UL>
<P>
<CENTER><TABLE BORDER><TR><TD>
<BR>
<CODE>r</CODE>  </TD><TD> read only</TD></TR><TR><TD>
<CODE>w</CODE>  </TD><TD> write only</TD></TR><TR><TD>
<CODE>rw</CODE> </TD><TD> no restriction</TD></TR><TR><TD>
<CODE>#w$r</CODE>       </TD><TD> root can write, authenticated users can read</TD></TR><TR><TD>
<CODE>r#w</CODE>        </TD><TD> anyone can read, root can also write</TD></TR><TR><TD>
<CODE>#rw</CODE>        </TD><TD> root can read/write</TD></TR><TR><TD>

<CAPTION>       Examples of option access rights</CAPTION>
</TD></TR></TABLE></CENTER>
<P>Unknown parameters are considered just not to have been implemented in this
particular version of Epos and are not reported. Parameters not mentioned
in <CODE>restr.ini</CODE> are allowed unlimited access by any connection.
<P>Note that the location of this file can be changed at the command line
(with <CODE>base_dir</CODE>).
<P>
<H2><A NAME="ss3.5">3.5 Semipermanent personal preferences</A>
</H2>

<P>
<P>If many users with different needs and aesthetic feelings
share the same Epos daemon installation, they may choose to
place the appropriate TTSCP commands into a file and to point
the <CODE>TTSCP_USER</CODE> environment variable to this file.
The contents of that file will be transmitted by the client
to set up the working environment at the beginning of every 
session.
<P>An example:
<P>
<BLOCKQUOTE><CODE>
<PRE>
set language czech
set voice kadlec
set init_f 90
set init_i 110
set language slovak
</PRE>
</CODE></BLOCKQUOTE>
<P>This example will adjust the preferred pitch and volume for a certain
Czech voice; it will also set the default language to Slovak. See
the 
<A HREF="epos-4.html#ttscp">TTSCP specification</A> for more info.
<P>
<H2><A NAME="soft-options"></A> <A NAME="ss3.6">3.6 Soft options </A>
</H2>

<P>
<P>Most options (discussed until this point) have built-in meanings
and semantics; for most uses this is sufficient and necessary.
However, the user may also decide to define additional options
to be provided by a language to its voices. This mechanism is
called <EM>soft options</EM>; soft options are always voice options
and are described at the language level (that is, the name, type
and default value is supplied with the language, but individual
voices may choose to specify a value for the option).
<P>The soft options are described by the language option <CODE>soft_options</CODE>.
It is a list of colon separated descriptions of individual soft options;
every item is of the format <CODE>name[(type)][=default]</CODE>, where <CODE>name</CODE>
is an arbitrary option name, <CODE>type</CODE> is either <CODE>b</CODE>
or <CODE>s</CODE> (meaning boolean or string; other possibilities include
<CODE>n, c</CODE> for integers and characters, but these are untested
and don't seem to be widely useful. The <CODE>default</CODE> is the default
value to be used if the option is left unspecified by a voice. It should be
chosen as a backward compatible value for a new option if applicable.
<P>The type and/or the default may be left unspecified. The default <CODE>type</CODE> is
boolean, the default <CODE>default</CODE> is an empty string.
<P>An example:
<P>
<BLOCKQUOTE><CODE>
<PRE>
        soft_options   "colloquial=false:segment_listing_file(s)=traditnl.dph"
</PRE>
</CODE></BLOCKQUOTE>
<P>This example defines two options, a boolean <CODE>colloquial</CODE> and
a string <CODE>segment_listing_file</CODE>.
<P>The sets of soft options for individual languages are independent and never
clash with each other. However, built-in option names may not be used
as soft option names.
<P>
<P>
<H2><A NAME="ss3.7">3.7 Level of description dependent options</A>
</H2>

<P>
<P>Some options, especially pertaining to parsing the input and
formatting the output, are set separately for every layer of
the 
<A HREF="epos-2.html#tsr">TSR</A>, so that each of them is actually
an array of options, indexed using the commercial at character
(@) followed by a layer name.  For example,
<P>
<BLOCKQUOTE><CODE>
<PRE>
        perm@colon      ":,"
</PRE>
</CODE></BLOCKQUOTE>
<P>defines the permissible colon terminators.  Since the TSR layer names
are themselves defined by the <CODE>unit_levels</CODE> option, the availability
of such options is dependent on the current value of some other option. 
For other options, such as <CODE>default_scope</CODE>, the value is a layer name,
and is thus meaningful only after the layers are defined; all such options
can only be set after the <CODE>unit_levels</CODE> option has been set correctly.
<P>As level description dependent options (the former type) do not yet exist
upon program startup, the access control in <CODE>restr.ini</CODE> only works
for the arrays of options, not individual options:
<P>
<BLOCKQUOTE><CODE>
<PRE>
        perm    r
</PRE>
</CODE></BLOCKQUOTE>
<P>For these and other reasons, changing the <CODE>unit_levels</CODE> option is not
recommended after any of both types of level of description dependent
options has been set.
<P>
<P>
<H2><A NAME="indivopts"></A> <A NAME="ss3.8">3.8 Selected individual options </A>
</H2>

<P>
<P>Most individual options will be described in this section.  The rest are either
straightforward or rarely useful. A complete list of options can be obtained
through <CODE>epos -H</CODE> or in <CODE>src/options.lst</CODE>.
<P>The type and the semantic class of the argument is indicated for all individual
options except for truth value (<CODE>on</CODE>/<CODE>off</CODE>) options.  This is because
these options, when found without an argument, are automatically interpreted
as <CODE>on</CODE>. 
<P>Many options may not make any sense to you; indeed, some of them don't
actually make sense to me.  Such options are usually relics from now
forgotten ad hoc configurations.  I appreciate any suggestions on how
to replace any old fashioned configuration mechanisms with more generic
and/or simpler ones.
<P>
<H3>Overall options</H3>

<P>
<P>Some options control overall preferences, strategies and assumptions
to be used by Epos.  Most of them are global booleans.  They are usually
of technical nature and the output produced by Epos should not change
with these options changed, but they can be useful in some special
configurations.  They also get added to resolve some simple software
engineering dilemmata.
<P>
<DL>
<DT><B>--comma <I>delimiter</I></B><DD><P>This is the delimiter for Epos-generated lists, especially
in TTSCP; an arbitrary string is allowed.  Do not change.
<DT><B>--default_char <I>character</I></B><DD><P>The character to replace any unknown characters in the input text.
See also the <CODE>relax_input</CODE> option.
<DT><B>--end_of_file <I>character</I></B><DD><P>The character to terminate the input text.  This defaults to the
escape character.  The length of the input text is usually
defined externally (by the <CODE>apply</CODE> command within a control
TTSCP connection or by the end of an input), however, there
are cases where this is not applicable or desirable for some
reason.  The character specified by this option terminates
the input text, but not the input stream.  It is also necessary
to press <CODE>Enter</CODE> after the character. Applies only to the
monolithic Epos.
<DT><B>--asyncing</B><DD><P>Turn on to enable asynchronous close() processing. Usable only
on unices; uses fork to delegate the synchronous close()
to a child. This option can be useful for eliminating communication
delays when closing a sound card file descriptor, but it can cause
subsequent references to the same device fail, because the child
still hasn't released the device.  The option has no meaning
on non-UNIX systems, where the close() is always synchronous.
<DT><B>--forking</B><DD><P>Turn on to allow forking and fully detaching the Epos daemon.
Usable only on unices.  If off, some debugging information will
be written to <CODE>stdout</CODE> in some configurations.
<A NAME="ml-option"></A> <DT><B>--markup_language <I>ml</I></B><DD><P>The parameter is either "ansi", "rtf" or "none". This parameter
is only effective in <CODE>fixed.ini</CODE> or on the command
line.  Depending on its value, the <CODE>ansi.ini</CODE> or <CODE>rtf.ini</CODE>
configuration file is appended to the <CODE>fixed.ini</CODE> file during
parsing the configuration.  These two files contain the complete
output formatting information necessary for printing text in
either the ANSI escape sequences (ISO 6429) or the Rich Text
Format; they use colors to distinguish between symbols of different
levels of description.
<DT><B>--pend_max <I>n</I> </B><DD><P>The maximum number of subtasks waiting in an input queue for
a single agent.  If this limit is reached, the preceding
agent stops processing further input until only <CODE>pend_min</CODE>
subtasks are left in the queue.  Setting this limit higher
will consume additional memory, as more processing can happen
in advance, but setting it too low may cause unnecessary delays.
<DT><B>--pend_min <I>n</I> </B><DD><P>The minimum desired number of subtasks waiting in an input
queue for a single agent.  If the queue length decrements
to this limit and the preceding agent has enough input
to process, it resumes operation.  This limit should
be set roughly to half the <CODE>pend_max</CODE> value.
<DT><B>--memory_low</B><DD><P>Turn on if you're very low on memory. This mode sacrifices speed
for a little bit of saved memory. Basically, turning this on
caused various dictionaries to be discarded whenever the rule
which has used them has been applied and reloaded the next time
it is needed.  Likewise, cached files are released upon the
last <CODE>unclaim</CODE>.  Otherwise these data structures are kept cached
in for the next use.
<DT><B>--paranoid</B><DD><P>With this option on, Epos will tend to detect more errors in
various kinds of input files than without.  It will rather
try to reject suspicious or formally incorrect inputs,
than to do something reasonable with them. Useful for debugging.
<DT><B>--pausing</B><DD><P>With this option on, Epos will pause and wait for a keypress
after every rule is applied.  Of course, this is incompatible
with the <CODE>forking</CODE> option and some other setups.  Should
be only used for debugging.
<DT><B>--ptr_trusted</B><DD><P>One of the checks performed when the 
<A HREF="#trusted-option">trusted</A> option is disabled is checking whether
some pointers are actually pointers, that is, very big numbers
when cast to an integer.  This can be useful on some machines,
but it is absolutely unportable.  It may or may not work with your
compiler; enable this option to skip these checks.
<DT><B>--relax_input</B><DD><P>Turn on in real life situations.  When off, Epos will quit parsing
any text which contains an unknown character (not listed in on of the
<CODE>perm_*</CODE> options).  This option replaces such characters with
the value of the <CODE>default_char</CODE> option before they're classified.
<DT><B>--show_rule</B><DD><P>Print each rule before it is applied.  This is useful mostly for
debugging situations (when a text is parsed in an unexpected way
and the user is trying to find out which rule has escaped his
attention). This option may not work with all setups.
<DT><B>--debug_password <I>password</I> </B><DD><P>An alternative password for server-level authentication.  Can be
useful when debugging the TTSCP implementation, with the obvious
security implications.
<DT><B>--handle_size <I>n</I> </B><DD><P>The TTSCP handle length in character.  The handles are always
generated randomly using a 64 character alphabet.  Use small
values for debugging the TTSCP implementation manually (and accept
the risk of a handle-guessing attack); use higher values in a
production environment.
<DT><B>--shriek_art number</B><DD><P>The picture to be printed to <CODE>stdshriek</CODE> in case of an error.
May or may not work.  Small integers such as 0, 1 or 2 are possible.
<A NAME="trusted-option"></A> <DT><B>--trusted</B><DD><P>Code related to the <CODE>class unit</CODE> often calls its <CODE>sanity</CODE> method
to detect any serious structure violation before it makes Epos crash
mysteriously.  In stable versions, however, these checks are unlikely
to be necessary.  Use this option to skip them.
<DT><B>--verbose</B><DD><P>When the rules are dumped with the <CODE>debug</CODE> rule type and this
option is set, all of them will be displayed.  Otherwise only the
current rule is displayed.  That's all.
<P>
<DT><B>--localsound</B><DD><P>Enables the use of the TTSCP <CODE>#localsound</CODE> output module.
<DT><B>--readfs</B><DD><P>Enables the use of file system based TTSCP input modules.  See
the 
<A HREF="#pseudorootdir-option">pseudo_root_dir option</A>
for more details.
<DT><B>--writefs</B><DD><P>Enables the use of file system based TTSCP output modules. See
the 
<A HREF="#pseudorootdir-option">pseudo_root_dir option</A>
for more details.
<P>
<DT><B>--unit_levels</B><DD><P>Levels of description.  Must be a colon separated list which includes
<CODE>segm</CODE> and <CODE>phone</CODE> as the two lowest levels, and <CODE>text</CODE>
as the highest level of description.  There are reasons why this should not
be a language dependent option; you can however define this to be the
union of all levels of description needed by any language.
<DT><B>--default_scope</B><DD><P>The default scope level of a rule -- one of the levels of description
defined with the <CODE>unit_levels</CODE> option.
<DT><B>--default_target</B><DD><P>The default target level of a rule -- one of the levels of description
defined with the <CODE>unit_levels</CODE> option.
<P>
<DT><B>--languages <I>list</I></B><DD><P>Lists initially available languages. The parameter is a colon separated
list of language names. Every language must have its associated <CODE>.ini</CODE>
file; the name of the file is obtained by suffixing <CODE>.ini</CODE> to the
language name, while the directory name matches the language name and is
located under the directory as determined by the <CODE>lang_base_dir</CODE>
option.  The first language listed will become the default language.
<P>
</DL>
<P>
<H3>Types of output</H3>

<P>When Epos is compiled as a TTSCP server, the variability of data formats
is controlled by TTSCP rather than by option settings.  However, there
are some options related to the output formats produced by the monolithic
binary (executable).  There are also some conventional informative outputs
that can be produced by the monolithic and server binaries equally.
<P>
<DL>
<DT><B>--show_phones</B><DD><P>Print the sequence of sounds generated from the text processed.
Monolithic binary only.
<DT><B>--show_segments</B><DD><P>Print the sequence of segments generated from the text processed.
Monolithic binary only.
<DT><B>--show_raw_segs</B><DD><P>When used in conjunction with the <CODE>show_segments</CODE> option, the segments
will be not only listed by name, but they will also include the actual
numbers generated.  Monolithic binary only.
<DT><B>--play_segments</B><DD><P>Synthesize the waveform and say it through the sound card.
Monolithic binary only.
<DT><B>--wave_header</B><DD><P>When dumping the waveform into a file or a TTSCP data connection,
put the RIFF wave file header at its beginning.  Regardless of
this value, the header is never added when writing the waveform
to a sound output device (a file descriptor which understands
the usual ioctls).  TTSCP requires this option be always set
to <CODE>on</CODE>; consequently, the option is only reasonably useful with the
monolithic binary.
<DT><B>--ulaw</B><DD><P>Generated waveform uses mu law sample encoding instead of linear encoding.
<DT><B>--out_sampling_rate <I>Hz</I> </B><DD><P>Voice dependent option.  May be used to downsample the output by one half.
<DT><B>--autofilter</B><DD><P>If this option is enabled, an appropriate low band filter is used whenever
downsampling.  This is necessary to avoid phantom sounds in the output.
<DT><B>--label_seg</B><DD><P>Output segment (diphone) labels in the output waveform using the appropriate
RIFF WAVE chunks.
<A NAME="labelphones-option"></A> <DT><B>--label_phones</B><DD><P>Output phone labels in the output waveform.  This is only possible if
phone boundary information is made available for the inventory using
the 
<A HREF="#snlfile-option">snl_file option</A>.  For other voices,
this option has no effect.
<DT><B>--label_sseg</B><DD><P>Very experimental.  If used in conjunction with the <CODE>label_phone</CODE>,
the phone labels are assigned not the phone level, but the highest
level whose boundary is detected at this place.  If you do use this
option, be aware that Epos will use a (very slightly) TTSCP 0
non-compatible internal representation for the segment (diphone) stream
to preserve the necessary suprasegmental unit boundary information.
Consequently, network voices provided by different TTSCP servers may
fail reporting unexpected segment numbers.
<DT><B>--immed_segments</B><DD><P>Print the sequence of segments generated from the text processed
just after the <CODE>segments</CODE> rule.  This is useful especially
in conjunction with the <CODE>neuronet</CODE> option where the segment layer
is created, but later to be discarded by the rules.
Monolithic binary only.
<DT><B>--neuronet</B><DD><P>Very experimental. See <CODE>doc/czech/nnet.doc</CODE> for more info.
Monolithic binary only.
<DT><B>--help</B><DD><P>Print a brief synopsis of short options upon startup.  No data processing
is performed.
<DT><B>--long_help</B><DD><P>Print a list of long options upon startup.  No data processing is performed.
<DT><B>--version</B><DD><P>Print the current version number to <CODE>stdshriek</CODE> upon startup.
</DL>
<P>
<P>
<H3>Text output formatting </H3>

<P>
<P>You can tailor the conventions for printing out processed text quite a lot.
Basically, we're printing out a 
<A HREF="epos-2.html#tsr">text structure representation</A>,
so that we can see what level of description does a character belong to.  Preserving
this information in the output is often very desirable; it can either be done
by inserting delimiters such as custom syllable breaks, or by coloring some levels
of description.
<P>This family of options can result in a quite complex configuration.
That's why we provide at least
two complete sets of settings in <CODE>ansi.ini</CODE> and <CODE>rtf.ini</CODE>. You can use the
<A HREF="#ml-option">markup_language</A> option to switch between them
in  <CODE>fixed.ini</CODE>.
<P>Some options control the colors used for output.  For the time being,
these options actually take the escape sequence needed to switch the
color for the current format (e.g. ANSI escape sequences or RTF).
In principle, other strings than escape sequences can be printed,
but such configuration is discouraged.
<P>Some options configure the appearance of the 
<A HREF="epos-2.html#tsr">TSR</A>
to the user.  The model we use is assigning a few colors consistently
to the individual levels of description and marking up the boundaries
between units with parentheses, separators or both. The levels of
description are 
<A HREF="epos-2.html#tsr-levels">defined</A> in compile time.
The <CODE>segment</CODE> and <CODE>text</CODE> may not be applicable for some of
these options. This model of displaying the TSR is not used for
transmitting the text over TTSCP.
<P>
<DL>
<DT><B>--colored</B><DD><P>If disabled, all color manipulating options will be ignored.
Many configurations will enable this by default, because the
escape sequences are rarely usable directly and never indirectly.
<DT><B>--normal_color <I>color</I></B><DD><P>String to switching to the neutral (default) color. Issued at the end
of every colored piece of text.
<DT><B>--curr_rule_color <I>color</I></B><DD><P>String to switch to the a <EM>bold</EM> color.  The bold color will
be used to highlight the current rule in the list of rules printed
by the 
<A HREF="epos-2.html#debug-rule">debug rule type</A>.
<DT><B>--fatal_color <I>color</I></B><DD><P>String to switch to the color used for printing out fatal error
messages.
<P>
<DT><B>--header <I>filename</I></B><DD><P>The value is the file name of a file in the directory specified
by the <CODE>ini_dir</CODE> option, which is to be printed before any
phonetic transcription. 
<DT><B>--footer <I>filename</I></B><DD><P>The value is the file name of a file in the directory specified
by the <CODE>ini_dir</CODE> option, which is to be printed after any
phonetic transcription.
<DT><B>--begin* <I>string</I></B><DD><P>The asterisk stands for a @-separated symbolic name of a linguistic description
level, such as <CODE>phone</CODE>, <CODE>syll</CODE> or <CODE>word</CODE>.  The parameter
is a string which will be printed before the first unit within this
unit, for example before the word-initial syllable in case of
<CODE>begin@word</CODE>).
<DT><B>--close* <I>string</I></B><DD><P>The asterisk stands for a @-separated symbolic name of a linguistic description
level, such as <CODE>phone</CODE>, <CODE>syll</CODE> or <CODE>word</CODE>.  The parameter
is a string which will be printed after the last unit within this
unit, for example before the word-final syllable in case of
<CODE>close@word</CODE>).
<DT><B>--color* <I>string</I></B><DD><P>The asterisk stands for a @-separated symbolic name of a linguistic description
level, such as <CODE>phone</CODE>, <CODE>syll</CODE> or <CODE>word</CODE>.  The parameter
is the string to switch the color for this level of description.
<DT><B>--separ* <I>string</I></B><DD><P>The asterisk stands for a @-separated symbolic name of a linguistic description
level, such as <CODE>phone</CODE>, <CODE>syll</CODE> or <CODE>word</CODE>.  The parameter
is a string which will be printed between adjacent units of this
level of description, for example between words in case of      
<CODE>separ@word</CODE>).
<DT><B>--structured</B><DD><P>Whether the verbose model of displaying the TSR as described above
is used. When off, only the text itself is printed and simple
spacing is used to delimit units which do not correspond to
actual characters.  This option is orthogonal to the <CODE>colored</CODE>
option.
<DT><B>--postfix</B><DD><P>If on, the upper level characters (such as punctuation) are printed
after the lower level characters (such as letters or sounds)
in the phonetic transcription.
<DT><B>--prefix</B><DD><P>If on, the upper level characters (such as punctuation) are printed
before the lower level characters (such as letters or sounds)
in the phonetic transcription.  Disabling both <CODE>prefix</CODE> and
<CODE>postfix</CODE> options effectively disables printing other characters
than sounds.  This option is orthogonal to the <CODE>structured</CODE>
option.
<DT><B>--swallow_underbars</B><DD><P>Epos uses the low line (<CODE>_</CODE>) character to represent
suprasegmental units with no content at their level (e.g. syllables
are often only implicitly terminated or even generated
by the rules and have no associated symbol.); this option,
when enabled, suppresses them completely.
</DL>
<P>
<P>
<H3>Limits</H3>

<P>
<P>Most algorithms used in Epos are boundless, avoiding techniques like fixed size
arrays or buffers.  On the other hand, there are instances when this is inadequate,
especially for speed or space considerations.  In these cases Epos tries to
use growable data structures, so that they perform well up to a certain size limit
and then somewhat slower, but still correctly.  We call such a limit a <EM>soft limit</EM>,
as opposed to a <EM>hard limit</EM> which cannot be exceeded.  Most limits in Epos are
configurable and soft, but some hard limits have also been imposed. This subsection
also covers some time vs. space trade-off configuration parameters, though
these are no limits at all. Also some <EM>sanity check limits</EM> are imposed; these
act as hard limits, but can be effectively disabled by setting them to absurdly
high values, with no direct impact on efficiency in the typical case.
<P>In fact, you can ignore this section completely, as the few hard limits tend to
employ reasonably high values.
<P>
<DL>
<DT><B>--seg_buff_size <I>segments</I></B><DD><P>Soft limit.  Maximum number of segments generated by the diphoniser
and synthesized at once. It more segments have to be generated,
they are synthesized in chunks of <CODE>seg_buff_size</CODE>.  If this
option is set to zero, a growable buffer is used instead, and
there is no limit on memory consumed.
This option has no effect in the monolithic Epos.
<DT><B>--buffer_size <I>bytes</I></B><DD><P>Soft limit. The initial buffer size for a wave file. This value is not
used, if we already know that we will eventually write this waveform
to a sound card device; in this case we use ioctls to find out the size
of its hardware buffer to maximize the chance of getting a smooth
playback.
<DT><B>--dev_text_len <I>bytes</I></B><DD><P>Sanity check limit.  When reading from a device, this is the maximum
amount of data which will be read for processing.  This is not necessary
when reading from a file, because the length of a file can be known in
advance and it is always finite.
<DT><B>--hashes_full <I>percentage</I></B><DD><P>Trade-off. Controls how full should a hash table ideally be.
The hash tables used in Epos
are actually quite robust performance-wise, so that even values
like 1000, that is, ten data items per a hash table slot, result
in near-optimal speed. Values somewhere below 100 are the best bet.
<DT><B>--max_line_len <I>characters</I></B><DD><P>Hard limit. Maximum line length in a text-oriented input file.
Longer lines are truncated.
<DT><B>--max_net_cmd <I>characters</I></B><DD><P>Hard limit. Maximum TTSCP command length. TTSCP lines longer
than this will be truncated.  The protocol requires this value
to be at least 80, but a few kilobytes is recommended.
<DT><B>--max_rule_weight <I>weight</I></B><DD><P>Sanity check limit. Maximum rule weight in a choice, as well as the maximum
rule repeat count. Using very large weights can result in memory
exhaustion.  Values on the order of 10000 are still perfectly safe.
<DT><B>--max_text_size <I>bytes</I></B><DD><P>Sanity check limit.  Maximum amount of space allowed for growable
processing buffers, or for the input text (checked just before parsing).
This option is generally used to avoid memory exhaustion.
<DT><B>--multi_subst <I>count</I></B><DD><P>Sanity check limit.  How may substitutions will be applied to a unit
during processing of a <CODE>subst</CODE> rule.  The rule is applied until
the unit settles down or until this limit is reached.  In the latter
case, the substitution is considered impossible (infinite).
<DT><B>--rules_in_block <I>count</I></B><DD><P>Soft limit. Number of rules used in a block of of rules.
<DT><B>--scratch_size <I>bytes</I></B><DD><P>Hard limit.  Epos uses a temporary internal buffer in a few places.
Usually only very few bytes of the buffer are needed, but overflowing
it is fatal. It is recommended to provide at least a few hundred bytes,
preferably kilobytes, for this buffer.
<DT><B>--variables <I>count</I></B><DD><P>Soft limit. Number of variables used in a set of rules.
</DL>
<P>
<P>
<H3>Language dependent configuration</H3>

<P>
<P>This subsection lists some options defined for each language.  Additional
language dependent options are certain directory and file names and possibly
others.  As every voice is associated with a single language (two voices
may share a multilingual segment inventory if desired), every voice dependent
option is thence language dependent.
<P>
<DL>
<DT><B>--name <I>voicename</I></B><DD><P>This option assigns a name to a newly created language.  If there is no name
specified, this option defaults to the configuration file name (from the
last slash to the nearest dot) the configuration has been loaded from.
The name is then used to refer to the language in TTSCP.  The language name
must begin with an alphabetical character and consist of alphanumerical
characters (dashes and underscores are also allowed).
<DT><B>--voices <I>list</I></B><DD><P>Lists initially available voices. The parameter is a colon separated
list of voice names. Every voice must have its associated <CODE>.ini</CODE>
file; the name of the file is obtained by suffixing <CODE>.ini</CODE> to the voice name
while the directory name matches the voice name and is located under
the directory as determined by the per language (default) <CODE>inv_dir</CODE>
option.  The first voice listed will become the default voice for its
language until switched.
<DT><B>--soft_options <I>list</I></B><DD><P>Lists available soft options as described in subsection
<A HREF="#soft-options">soft options</A>.
<DT><B>--fallback_voice <I>voicename</I></B><DD><P>Not used under normal circumstances.  Epos initialises its
synthesis type dependent specific structures the first time
it uses a voice.  Should such an initialization fail because
of a network error, the current voice will be switched to
the voice specified by this option and the initialisation will be
retried.
<DT><B>--suppress_side_syll</B><DD><P>This option should be off for most languages.  It makes the
<CODE>syll</CODE> rule avoid splitting off an insufficiently sonorous
word-initial pseudo-syllable. It is an ugly hack originally
introduced to get the Czech syllabification right, but I am
still not aware of related phenomena or possible generalizations.
<DT><B>--limit_side_syll <I>sound</I></B><DD><P>This parameter is only considered if <CODE>suppress_side_syll</CODE> is
enabled.  The parameter is the least permissible sonorous sound
to serve as a sonority peak if it happens to be word-initial.
(More precisely: permissible target unit, scope-initial, as defined
by the individual <CODE>syll</CODE> rule.)
<DT><B>--rules_file <I>filename</I></B><DD><P>The parameter is a filename. The file contains the transformational
rules to be applied for this language.
<DT><B>--perm* <I>set</I></B><DD><P>The asterisk stands for a @-separated symbolic name of a linguistic description
level, such as <CODE>phone</CODE>, <CODE>syll</CODE> or <CODE>word</CODE>.  The parameter
is a simple sequence of all characters belonging to this level
of description. For example, <CODE>perm_phones</CODE> will list letters,
numbers and other segmental symbols.  Punctuation will be assigned
to the higher level sets.  The sets should be disjoint and only the
characters actually processed by the rules should be listed here.
The language independent built-in parser tries to resolve the most
common ambiguities of Latin-based writing systems, like periods.
</DL>
<P>
<H3>Voice dependent configuration</H3>

<P>
<P>
<DL>
<DT><B>--name <I>voicename</I></B><DD><P>This option assigns a name to a newly created voice.  If there is no name
specified, this option defaults to the configuration file name (from the
last slash to the nearest dot) the configuration has been loaded from.
The name is then used to refer to the voice in TTSCP.  The voice name
must begin with an alphabetical character and consist of alphanumerical
characters (dashes and underscores are also allowed).
<DT><B>--type <I>synthtype</I></B><DD><P>The parameter, the speech synthesis type, is one of the following:
<CENTER><TABLE BORDER><TR><TD>
<BR>
<CODE>none</CODE> </TD><TD> voice is mute </TD></TR><TR><TD>
<CODE>internet</CODE>   </TD><TD> voice uses a remote speech synthesis using TCP/IP</TD></TR><TR><TD>
<CODE>lpc-int</CODE>    </TD><TD> voice uses a LPC synthesis (integer based)</TD></TR><TR><TD>
<CODE>lpc-float</CODE>  </TD><TD> voice uses a LPC synthesis (floating point based)</TD></TR><TR><TD>
<CODE>lpc-vq</CODE> </TD><TD> voice uses a LPC synthesis (vector quantified)</TD></TR><TR><TD>
<CODE>ktd</CODE> </TD><TD> voice uses a time domain synthesis (Zdenek Kadlec)</TD></TR><TR><TD>
<CODE>ptd</CODE> </TD><TD> voice uses a time domain synthesis (Martin Petriska)</TD></TR><TR><TD>

</TD></TR></TABLE></CENTER>

This option may influence other voice dependent options quite significantly,
as some of them are speech synthesis type dependent.
<DT><B>--location <I>[[voice][.language]@]hostname[:port]</I> </B><DD><P>If this speech synthesis is of the <CODE>internet</CODE> type,
this option can be used to set the hostname of the remote
server.  If the remote server is listening on a non-standard port number
(currently the standard port is considered to be 8778), the
host name may be followed by a colon and the port number
requested.  The desired remote voice and language may be optionally specified
before the host name, separated with a <CODE>@</CODE> character
from the host name and with a dot from each other.  If a language name
is specified, while a voice name is not, the language name should be
preceded with a dot.
The defaults for voice, language, and port number are
remote default voice, local current language, and 8778,
respectively.
<P>For other synthesis types, this is a directory
name which holds inventory related files (in the "inv"
subtree), and is subject to normal file naming conventions,
as described in 
<A HREF="#file-naming">file naming</A>.
<DT><B>--deadlock_timeout <I>n</I></B><DD><P>The value is a time interval in seconds.  This option is meaningless
for voices of type other then <CODE>internet</CODE>.  For remote voices,
if the remote server is successfully connected to, but doesn't send
any TTSCP session header (nor anything else) to the local server
acting as a TTSCP client, it is either severely misconfigured,
overloaded, deadlocked (e.g. tries to use itself as a remote
server for its current voice), or communicating over a congested, unreliable
or slow network connection.
A value of <CODE>0</CODE> is actually a very small positive value and negative
values are not accepted.
<DT><B>--n_segs <I>n</I> </B><DD><P>The total number of segments withing the segment inventory.
<DT><B>--models <I>filename</I></B><DD><P>The value is a file name. The file contains the segment inventory
proper. Its format is speech synthesis type dependent.
<DT><B>--counts <I>filename</I></B><DD><P>The value is a file name. The file contains the lengths of individual
segments in this segment inventory.
<DT><B>--dpt_file <I>filename</I></B><DD><P>The value is a file name. The file contains the symbolic segment names
for user output.
<DT><B>--codebook <I>filename</I></B><DD><P>The value is a file name. The file contains the code book for
the vector quantified LPC speech synthesis (<CODE>lpc-vq</CODE> type only).
<A NAME="snlfile-option"></A> <DT><B>--snl_file <I>filename</I></B><DD><P>The value is a file name.  The file contains phone boundary information
for individual segments in this segment inventory.  Each line of the file
contains three space-separated items: segment number, relative position
within the segment (valued from 1 to 1024, e.g. 512 is the middle of the segment)
and the character (phone representation) which is to be associated with
the position.  Lines not conforming to this specification are ignored.
Currently, at most one label may be indicated for one segment, but it
would be easy to get rid of this limit.
See also 
<A HREF="#labelphones-option">label_phones option</A>.
<DT><B>--init_f <I>percentage</I></B><DD><P>The auditory neutral integer value for the fundamental frequency.
The typical value is 100.
<DT><B>--init_i <I>percentage</I></B><DD><P>The auditory neutral integer value for the volume.
The typical value is 100.
<DT><B>--init_t <I>percentage</I></B><DD><P>The auditory neutral integer value for the prosodic duration of segments.
The typical value is 100.  Of course, it is segment length relative
(some segments are longer than others), just as the <CODE>init_f</CODE>
and <CODE>init_i</CODE> options are.
<DT><B>--channel <I>channeltype</I></B><DD><P>The parameter, the output channel type, is one of the following:
<CENTER><TABLE BORDER><TR><TD>
<BR>
<CODE>mono</CODE>       </TD><TD> mono output signal </TD></TR><TR><TD>
<CODE>left</CODE>       </TD><TD> stereo output signal, right channel is mute</TD></TR><TR><TD>
<CODE>right</CODE>      </TD><TD> stereo output signal, left channel is mute</TD></TR><TR><TD>
<CODE>both</CODE>       </TD><TD> stereo output signal, two identical channels</TD></TR><TR><TD>

</TD></TR></TABLE></CENTER>

This option may be used to simulate a dialogue by assigning
different output channels to different speakers.
<DT><B>--inv_sampling_rate <I>Hz</I></B><DD><P>The sampling rate this segment inventory has been recorded at.
The algorithms we use also imply that we use the same frequency
for the synthesis.
<DT><B>--sample_size <I>bits</I></B><DD><P>Number of bits per sample.  If some kind of a stereo output
is turned on, this option set the number of bits per channel.
Again, this is related to the quality of recording of the
segment inventory.  We currently only support 8 and 16 bits.
</DL>
<P>
<P>
<H3>Prosody generation</H3>

<P>
<P>The options in this section control how the resulting per segment prosodic
information is assembled from the prosodic adjustments done to the
structural units by the rules.  It actually controls the interpretation
of those adjustments themselves.
<P>
<DL>
<DT><B>--pros_weight* <I>weight</I></B><DD><P>The asterisk stands for a @-separated symbolic name of a linguistic description
level, such as <CODE>phone</CODE>, <CODE>syll</CODE> or <CODE>word</CODE>.  The parameter
is an integer value primarily used for enabling (1) or disabling (0)
certain levels of description when the total quantities for a segment
are computed.  It must however be understood that when some rules
like <CODE>smooth</CODE> are applied, the prosodic values are distributed
down to the target level of such a rule and cannot be distinguished
anymore.  If higher values than 1 are set, that will multiply the
prosodic effect assigned to a level correspondingly.
<DT><B>--pros_eff_multiply_*</B><DD><P>The asterisk stands for a single letter, <CODE>f</CODE>, <CODE>i</CODE> or <CODE>t</CODE>,
that is, a prosodic quantity symbol.  This option controls how
are the prosodic values for individual levels of description
combined.  If it is off, they are summed up (taking the corresponding <CODE>pros_neutral_*</CODE>
as the baseline); if it is on, they get multiplied with each other
(again taking <CODE>pros_neutral_*</CODE> as the neutral value). See 
<A HREF="epos-2.html#prosody">prosody modelling</A> for more information and examples.
<DT><B>--pros_neutral_*</B><DD><P>The asterisk stands for a single letter, <CODE>f</CODE>, <CODE>i</CODE> or <CODE>t</CODE>,
that is, a prosodic quantity symbol.  This option controls what
prosodic value is to be considered neutral for use in Epos. The current
configuration file use 100 and prosodic adjustments are essentially
percentages, but a higher value could be used for more fine grained
prosody control (provided the synthesis algorithms can take advantage
of it).
</DL>
<P>
<P>
<P>
<P>
<P>
<P>
<P>
<P>
<P>
<P>
<P>
<P>
<P>
<P>
<P>
<P>
<P>
<H3><A NAME="file-naming"></A> File naming </H3>

<P>In Epos, most of the files ever opened are located in a single directory tree.
This tree usually starts at <CODE>/usr/lib/epos</CODE>, but it can be changed at
configure time.  For example, after issuing
<P>
<BLOCKQUOTE><CODE>
<PRE>
cd src
./configure --prefix=/usr/local
</PRE>
</CODE></BLOCKQUOTE>
<P>and after recompiling and reinstalling Epos, the files will be searched under
<CODE>/usr/local/lib/epos</CODE>.  See <CODE>configure --help</CODE> for more
details on configuring Epos.  It is also possible to use the command
line option <CODE>base_dir</CODE> at Epos startup to change the
tree base without recompilation.  Files of the same type -- and related
to the same language or voice, if applicable -- are located in the same subdirectory
by default.  Thus, the path name actually used by Epos consists of the base directory
path, the subdirectory (or directory for short) and a relative file name.
This makes it possible to move either the whole configuration structure, or
a specific part of it, or a single file to another place.
<P>The relative file name may contain slashes (directory name separators).
If they only occur in the middle of the name, the file name is still
relative to the directory it would normally
be located in.  However, if the file name begins with a slash or with <CODE>./</CODE>,
the file is treated as absolute or relative to the current working directory
of the Epos process, respectively.  The second case is thus slightly unreliable,
but the first one allows to place any file in an arbitrary directory. 
Likewise, if the directory name begins with a slash, it is not considered
to be relative to the base directory.
<P>Changing these options in run time does not immediately cause re-reading the
renamed files.
<P>
<DL>
<DT><B>--base_dir <I>dirname</I></B><DD><P>The value is an absolute directory name.  This option can be used to
change the location of the whole configuration structure, which can also be
used for trying out Epos before installing it:
<BLOCKQUOTE><CODE>
<PRE>
cd src
./epos --base_dir ../cfg
</PRE>
</CODE></BLOCKQUOTE>
<P>
<A NAME="pseudorootdir-option"></A> n
<DT><B>--pseudo_root_dir <I>dirname</I></B><DD><P>The value is a directory name.  Sets the path prepended
to any file name referenced in the TTSCP 
<A HREF="epos-4.html#strm-cmd">stream command</A>. This subtree cannot be escaped with
cute parent-of-root paths, but you can use symlinks to arbitrary
accessible parts of the kernel name space, again, without
giving access to the rest of the file system. Write access
to this subtree to any user except Epos effectively gives him
the privilege to use the Epos file access rights anywhere
in the system through creating a symlink to the absolute root directory.
<P>
<P>
<DT><B>--ini_dir <I>dirname</I></B><DD><P>The value is a directory name.  Sets the path to language
independent configuration files.
<P>
<DT><B>--fixed_ini_file <I>filename</I></B><DD><P>The value is a file name.  This option can be used to change the file name
of the <CODE>fixed.ini</CODE> file, which usually contains operating system
independent, relatively fixed default global configuration.
<DT><B>--cfg_file <I>filename</I></B><DD><P>The value is a file name. This option can be used to change the file name
of the <CODE>epos.ini</CODE> file.
<DT><B>--local_sound_file <I>filename</I></B><DD><P>The value is a file name. This option can be used to change the file name
of the local sound card device. In many unices,
setting this to <CODE>/dev/dsp</CODE> is the recommended way to actually hear
Epos speak. Other unices don't have <CODE>/dev/dsp</CODE>, however.  If the
sound card has no file name at all, set this to the null device
file name.
<DT><B>--input_file <I>filename</I></B><DD><P>The value is a file name. This option can be used to change the file name
of the implicit input text used by the monolithic version of Epos.
The value is language dependent.
<DT><B>--nnet_file <I>filename</I></B><DD><P>The value is a file name. This option can be used to change the file name
of the file produced by the experimental <CODE>neuronet</CODE> option.
<DT><B>--stddbg_file <I>filename</I></B><DD><P>The value is a file name. This option can be used to change the file name
whereto various debugging output should be written. If not set at all,
<CODE>stdout</CODE> will be used.
<DT><B>--stdshriek_file <I>filename</I></B><DD><P>The value is a file name. This option can be used to change the file name
whereto output unrelated to the usual output should be printed. It includes
especially error messages.
<P>
<DT><B>--rules_dir <I>dirname</I></B><DD><P>The language dependent value is a directory name.
The directory shall contain the rules file.
<DT><B>--hash_dir <I>dirname</I></B><DD><P>The language dependent value is a directory name.
The directory shall contain any dictionaries used by the rules.
<DT><B>--input_dir <I>dirname</I></B><DD><P>The language dependent value is a directory name.
The directory shall contain the implicit input text file for the
monolithic version of Epos.
<DT><B>--lang_base_dir <I>dirname</I></B><DD><P>The value is a global directory name, not a language dependent one.
It serves as the base directory for looking up the newly constructed
languages.
<DT><B>--voice_base_dir <I>dirname</I></B><DD><P>The value is a global directory name, not a language dependent one.
It serves as the base directory for looking up the newly constructed
voices.  It is however only used for configuration files, not
for inventories.  A language dependent subdirectory name is
appended to it.
<DT><B>--inv_base_dir <I>dirname</I></B><DD><P>The value is a global directory name, not a language dependent one.
It serves as the base directory for looking up inventories and
related data.  A voice dependent subdirectory name (the <CODE>location</CODE>
option) is appended to it.
<DT><B>--ttscp_help_dir <I>dirname</I></B><DD><P>The value is a directory name.  In this directory, TTSCP help files
for individual TTSCP commands and other help topics are located.
The contents of these files is sent to the TTSCP control connection
in reply to a corresponding <CODE>help</CODE> command.
<DT><B>--wav_dir <I>dirname</I></B><DD><P>The value is a global directory name.
Any waveform files created by Epos without explicit directory
specification will be created in this directory.
Applies only to the monolithic Epos.
<DT><B>--matlab_dir <I>dirname</I></B><DD><P>The value is a global directory name.
An input file for the experimental neural networks will be created
in the directory when the <CODE>neuronet</CODE> option is on.  Its name
is specified by the <CODE>nnet_file</CODE> option.
Applies only to the monolithic Epos.
<P>
</DL>
<P>
<P>
<H3>Daemon startup options</H3>

<P>
<P>The options in this section usually have no effect if changed in run time;
change them in the configuration files instead and restart Epos.
<P>
<DL>
<P>
<A NAME="daemon-log-option"></A> <DT><B>--daemon_log <I>filename</I></B><DD><P>The value is a file name. This option can be used to set the file
where various information about the Epos process is recorded.
At the moment that is of little practical use except for debugging.
<DT><B>--use_syslog</B><DD><P>Log all TTSCP error messages with syslogd, if the syslog facility
is available.  Due to the internal design of Epos, some of these
messages are never actually sent over TTSCP to anyone - for example,
a fatal misconfiguration condition detected before the first client
connects.
<DT><B>--full_syslog</B><DD><P>Log all TTSCP completion messages with syslogd, if the syslog facility is
available, including 1xx and 2xx class messages.
<A NAME="authpriv-option"></A> <DT><B>--authpriv</B><DD><P>Log all security relevant TTSCP completion messages with the
facility <CODE>authpriv</CODE> instead of <CODE>daemon</CODE>.  This includes
messages concerning denial of access or incorrectly specified
resource or password.  In that case, the <CODE>err</CODE> message level
is used instead of <CODE>warn</CODE>.  Notice that network errors
are not affected by this option.
<DT><B>--log_codes </B><DD><P>When set, all TTSCP messages are preceded with their numeric codes
as in TTSCP.
<DT><B>--server_pwd_file <I>filename</I></B><DD><P>The value is a file name. This option can be used to force the server
to store its internal password to a file.  This password can then
be used for TTSCP authentication in order to issue restricted commands
such as <CODE>down</CODE>.  If the file can not be created, no error is reported.
<DT><B>--restr_file <I>filename</I></B><DD><P>The file named by this parameter provides access control in TTSCP to individual
options.  Its syntax is described 
<A HREF="#restricted-options">above</A>.
<DT><B>--listen_port <I>port</I></B><DD><P>The TCP port number where the daemon should be listening for incoming
TTSCP connections. The daemon will check if no other service is already
running on that port and refuses to run if the port is already occupied.
<DT><B>--local_only </B><DD><P>When this option is set, the daemon accepts no new connections on
network interfaces except the localhost one.  This way, only clients
running on the same machine can connect to the server.  If this option
is not set, the server accepts new connections on all available
interfaces.
</DL>
<P>
<P>
<H3>Debugging options</H3>

<P>
<P>Various kinds of debugging information can be printed by Epos.
The amount and topics of it can be reasonably tuned by a couple
of options.  Most debugging information is printed throughout
the code using the <CODE>DEBUG</CODE> macro; other sources or debugging
information are not discussed in this subsection.  The <CODE>DEBUG</CODE>
macro takes three parameters: the <EM>code area</EM>, the 
<EM>severity level</EM> and the code to be executed if the severity
level supplied is considered sufficient under current settings.
This code is usually a <CODE>fprintf</CODE> to the <CODE>stddbg</CODE> stream.
The decision whether to execute the debugging code, based on the
code area and severity level is carried out by the <CODE>debug_wanted</CODE>
function supplied in <CODE>src/interf.cc</CODE>.  You can either edit
it yourself, or, you can use the options described in this section
to control the behavior of the default <CODE>debug_wanted</CODE> function
supplied by Epos.  Note that <CODE>#define DEBUGGING</CODE> must be
enabled in <CODE>interf.h</CODE>, else the <CODE>DEBUG</CODE> macro is ignored
altogether.
<P>The <I>level</I> argument taken by many options in this subsection 
is a severity level number.
<P>
<CENTER><TABLE BORDER><TR><TD>
<BR>
level </TD><TD> debugging messages </TD><TD> comment </TD></TR><TR><TD>
0 </TD><TD> detailed </TD><TD> non-systematic chaos </TD></TR><TR><TD>
1 </TD><TD> verbose </TD><TD> too verbose </TD></TR><TR><TD>
2 </TD><TD> normal </TD><TD> informative </TD></TR><TR><TD>
3 </TD><TD> rare </TD><TD> warnings, and such </TD></TR><TR><TD>

<CAPTION>       Severity levels</CAPTION>
</TD></TR></TABLE></CENTER>
<P>
<P>
<P>
<DL>
<DT><B>--use_debug</B><DD><P>This option must be <CODE>on</CODE> to provide any debugging information (except for
daemon activity logging controlled by 
<A HREF="#daemon-log-option">the daemon_log option</A>.
<DT><B>--assim_debug <I>level</I></B><DD><P>Severity level threshold for the code area of <CODE>regress</CODE> and
related types of rules, as well as their implementation in the
<CODE>src/unit.cc</CODE> file.
<DT><B>--cfg_debug <I>level</I></B><DD><P>Severity level threshold for the code area of parsing
the Epos configuration <CODE>.ini</CODE> files.
A few instances in this area may not be handled properly, because
they are called before this option is set itself. In this case,
the default severity level threshold as found in the
<CODE>src/options.lst</CODE> file.
<DT><B>--daemon_debug <I>level</I></B><DD><P>Severity level threshold for the code areas of scheduling and TTSCP
interpretation. This code is absent from the monolithic Epos.
<DT><B>--elem_debug <I>level</I></B><DD><P>Severity level threshold for the code area of the
<A HREF="epos-2.html#tsr">text structure representation</A>. 
This usually does not include code which is specifically
written to support a particular rules type.
<DT><B>--interf_debug <I>level</I></B><DD><P>Severity level threshold for the "interface" code area;
that is, for assorted (usually) non-member functions, usually
located in <CODE>src/interf.cc</CODE>. This is a catch-all area.
<DT><B>--parser_debug <I>level</I></B><DD><P>Severity level threshold for the code area of parsing
text to yield a 
<A HREF="epos-2.html#tsr">text structure representation</A>.
It nearly coincides with the <CODE>src/parser.cc</CODE> file.
<DT><B>--rules_debug <I>level</I></B><DD><P>Severity level threshold for the code area of
parsing and application of the rules. This usually does
not include any code which is rule type specific.
<DT><B>--split_debug <I>level</I></B><DD><P>Severity level threshold for the code area of most
types of rules, as well as their implementation in the
<CODE>src/unit.cc</CODE> file.  This covers especially
syllabification, diphonization and other structure
manipulations.
<DT><B>--subst_debug <I>level</I></B><DD><P>Severity level threshold for the code area of <CODE>subst</CODE> and
related types of rules, as well as their implementation in the
<CODE>src/unit.cc</CODE> file
<DT><B>--synth_debug <I>level</I></B><DD><P>Severity level threshold for the code area of low level
speech syntheses (segments to speech). It covers both
individual algorithms and the common code.
<DT><B>--always_debug <I>level</I></B><DD><P>The global positive severity level threshold. Any debugging code
which reaches at least this severity level is executed regardless
of the code area specific threshold. This option is especially useful for
generic debugging, when the code area responsible for incorrect behavior
is still unknown.
<DT><B>--limit_debug <I>level</I></B><DD><P>The global negative severity level threshold. No debugging code
which fails to reach at least this severity level is executed regardless
of the code area specific threshold. This option is useful for setting
up a global severity level threshold for most (non-focused) code areas.
Should the <CODE>always_dbg</CODE> and <CODE>limit_dbg</CODE> options come into conflict,
the former takes precedence.
<DT><B>--focus_debug <I>area</I></B><DD><P>The parameter is a code area to be excepted from the <CODE>limit_dbg</CODE> option.
This code area will obey its own severity level limit, even if the global
negative limit is stricter.  The global positive severity level is however
unaffected.  Every area uses the same name as in its corresponding severity
level threshold option, without the <CODE>_dbg</CODE> suffix.
</DL>
<P>
<P>
<HR>
<A HREF="epos-4.html">Next</A>
<A HREF="epos-2.html">Previous</A>
<A HREF="epos.html#toc3">Contents</A>
</BODY>
</HTML>
